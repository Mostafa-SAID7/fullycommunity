<div class="max-w-[680px] mx-auto space-y-4">
  <!-- Stories Section -->
  <app-stories></app-stories>

  <!-- Create Post -->
  <app-create-post (postCreated)="onPostCreated($event)"></app-create-post>

  <!-- Filter Tabs -->
  <div class="bg-white dark:bg-gray-900 rounded-lg shadow-sm p-2 flex gap-2 overflow-x-auto">
    @for (filter of filters; track filter.key) {
      <button 
        class="px-4 py-2 rounded-lg text-sm font-medium whitespace-nowrap transition-colors"
        [class.bg-primary]="activeFilter() === filter.key"
        [class.text-white]="activeFilter() === filter.key"
        [class.text-gray-700]="activeFilter() !== filter.key"
        [class.dark:text-gray-300]="activeFilter() !== filter.key"
        [class.hover:bg-gray-100]="activeFilter() !== filter.key"
        [class.dark:hover:bg-gray-800]="activeFilter() !== filter.key"
        (click)="setFilter(filter.key)">
        {{ filter.label }}
      </button>
    }
  </div>

  <!-- Posts Feed -->
  <div class="space-y-4">
    @for (post of posts(); track post.id) {
      <app-post-card 
        [post]="post" 
        (deleted)="onPostDeleted($event)">
      </app-post-card>
    }

    @if (loading()) {
      <div class="flex flex-col items-center justify-center py-12 bg-white dark:bg-gray-900 rounded-lg shadow-sm">
        <svg class="animate-spin w-10 h-10 text-primary mb-3" viewBox="0 0 24 24" fill="none">
          <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
          <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
        </svg>
        <span class="text-gray-600 dark:text-gray-400">Loading posts...</span>
      </div>
    }

    @if (!loading() && posts().length === 0) {
      <div class="flex flex-col items-center justify-center py-16 bg-white dark:bg-gray-900 rounded-lg shadow-sm">
        <svg class="w-16 h-16 text-gray-400 mb-4" viewBox="0 0 24 24" fill="currentColor">
          <path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-5 14H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z"/>
        </svg>
        <h3 class="text-xl font-semibold text-gray-900 dark:text-white mb-2">No posts yet</h3>
        <p class="text-gray-600 dark:text-gray-400">Be the first to share something with the community!</p>
      </div>
    }

    @if (hasMore() && !loading() && posts().length > 0) {
      <button class="w-full py-3 px-4 bg-white dark:bg-gray-900 hover:bg-gray-50 dark:hover:bg-gray-800 text-primary font-medium rounded-lg shadow-sm transition-colors"
              (click)="loadMore()">
        Load More Posts
      </button>
    }
  </div>
</div>
