<!-- Create Post Card -->
<div class="bg-white dark:bg-gray-900 rounded-lg shadow-sm p-4 mb-4">
  <div class="flex items-center gap-3 mb-3">
    <div class="w-10 h-10 rounded-full bg-gradient-to-br from-primary to-primary-hover text-white flex items-center justify-center font-semibold">
      {{ getUserInitials() }}
    </div>
    <button class="flex-1 px-4 py-2.5 bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-full text-left text-gray-500 dark:text-gray-400 transition-colors" (click)="openModal()">
      What's on your mind?
    </button>
  </div>
  <div class="flex items-center justify-around pt-3 border-t border-gray-200 dark:border-gray-800">
    <button class="flex items-center gap-2 px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg transition-colors" (click)="openModal()">
      <svg class="w-6 h-6 text-error" viewBox="0 0 24 24" fill="currentColor">
        <path d="M17 10.5V7c0-.55-.45-1-1-1H4c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h12c.55 0 1-.45 1-1v-3.5l4 4v-11l-4 4z"/>
      </svg>
      <span class="text-sm font-medium text-gray-700 dark:text-gray-300">Live Video</span>
    </button>
    <button class="flex items-center gap-2 px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg transition-colors" (click)="openModal()">
      <svg class="w-6 h-6 text-success" viewBox="0 0 24 24" fill="currentColor">
        <path d="M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z"/>
      </svg>
      <span class="text-sm font-medium text-gray-700 dark:text-gray-300">Photo/Video</span>
    </button>
    <button class="flex items-center gap-2 px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg transition-colors" (click)="openModal()">
      <svg class="w-6 h-6 text-warning" viewBox="0 0 24 24" fill="currentColor">
        <path d="M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm3.5-9c.83 0 1.5-.67 1.5-1.5S16.33 8 15.5 8 14 8.67 14 9.5s.67 1.5 1.5 1.5zm-7 0c.83 0 1.5-.67 1.5-1.5S9.33 8 8.5 8 7 8.67 7 9.5 7.67 11 8.5 11zm3.5 6.5c2.33 0 4.31-1.46 5.11-3.5H6.89c.8 2.04 2.78 3.5 5.11 3.5z"/>
      </svg>
      <span class="text-sm font-medium text-gray-700 dark:text-gray-300">Feeling/Activity</span>
    </button>
  </div>
</div>

<!-- Create Post Modal -->
<div *ngIf="showModal()" class="fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4" (click)="closeModal()">
  <div class="bg-white dark:bg-gray-900 rounded-lg shadow-xl w-full max-w-lg max-h-[90vh] overflow-hidden flex flex-col" (click)="$event.stopPropagation()">
    <!-- Modal Header -->
    <div class="flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-800">
      <h2 class="text-xl font-semibold text-gray-900 dark:text-white">Create Post</h2>
      <button class="w-9 h-9 flex items-center justify-center rounded-full hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors" (click)="closeModal()">
        <svg class="w-6 h-6 text-gray-500" viewBox="0 0 24 24" fill="currentColor">
          <path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>
        </svg>
      </button>
    </div>

    <!-- Modal Body -->
    <div class="flex-1 overflow-y-auto p-4">
      <!-- User Info -->
      <div class="flex items-center gap-3 mb-4">
        <div class="w-10 h-10 rounded-full bg-gradient-to-br from-primary to-primary-hover text-white flex items-center justify-center font-semibold">
          {{ getUserInitials() }}
        </div>
        <div class="flex-1">
          <div class="font-semibold text-gray-900 dark:text-white">User Name</div>
          <select class="mt-1 px-2 py-1 text-xs bg-gray-100 dark:bg-gray-800 border-0 rounded-md text-gray-700 dark:text-gray-300 focus:outline-none focus:ring-2 focus:ring-primary" [(ngModel)]="visibility">
            <option value="Public">üåç Public</option>
            <option value="FriendsOnly">üë• Friends</option>
            <option value="Private">üîí Only me</option>
          </select>
        </div>
      </div>

      <!-- Content Input -->
      <textarea class="w-full p-3 border-0 resize-none focus:outline-none text-gray-900 dark:text-white bg-transparent placeholder-gray-400 dark:placeholder-gray-500" placeholder="What's on your mind?" [(ngModel)]="postContent" rows="4"></textarea>

      <!-- Add to Post -->
      <div class="flex items-center justify-between p-3 border border-gray-200 dark:border-gray-700 rounded-lg mt-4">
        <span class="text-sm font-medium text-gray-700 dark:text-gray-300">Add to your post</span>
        <div class="flex items-center gap-1">
          <label class="w-9 h-9 flex items-center justify-center rounded-full hover:bg-gray-100 dark:hover:bg-gray-800 cursor-pointer transition-colors" title="Photo/Video">
            <input type="file" accept="image/*,video/*" multiple (change)="onFileSelect($event)" hidden>
            <svg class="w-6 h-6 text-success" viewBox="0 0 24 24" fill="currentColor">
              <path d="M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z"/>
            </svg>
          </label>
        </div>
      </div>
    </div>

    <!-- Modal Footer -->
    <div class="p-4 border-t border-gray-200 dark:border-gray-800">
      <button class="w-full py-2.5 px-4 bg-primary hover:bg-primary-hover disabled:bg-gray-300 disabled:cursor-not-allowed text-white font-semibold rounded-lg transition-colors" [disabled]="!postContent().trim() || isSubmitting()" (click)="submitPost()">
        <span *ngIf="isSubmitting()">Posting...</span>
        <span *ngIf="!isSubmitting()">Post</span>
      </button>
    </div>
  </div>
</div>