<div class="section-layout">
  <!-- Left Sidebar -->
  <aside class="left-sidebar">
    <!-- User Profile Quick Access -->
    @if (user()) {
      <a routerLink="/profile" class="user-profile-link">
        <div class="avatar">{{ getUserInitials() }}</div>
        <span>{{ user()?.firstName }} {{ user()?.lastName }}</span>
      </a>
    }

    <!-- Section Header -->
    <div class="section-header">
      <svg viewBox="0 0 24 24" fill="currentColor">
        <path [attr.d]="sectionIcon"/>
      </svg>
      <h2>{{ sectionTitle }}</h2>
    </div>

    <!-- Main Menu -->
    <nav class="sidebar-nav">
      @for (item of menuItems; track item.route) {
        <a [routerLink]="item.route" 
           routerLinkActive="active" 
           [routerLinkActiveOptions]="{exact: item.exact || false}"
           class="nav-link">
          <svg viewBox="0 0 24 24" fill="currentColor">
            <path [attr.d]="getIcon(item.icon)"/>
          </svg>
          <span>{{ item.label }}</span>
          @if (item.badge && item.badge > 0) {
            <span class="badge">{{ item.badge }}</span>
          }
        </a>
      }
    </nav>

    @if (shortcuts.length > 0) {
      <hr class="divider">
      <!-- Shortcuts -->
      <div class="shortcuts-section">
        <h4>Your Shortcuts</h4>
        @for (shortcut of shortcuts; track shortcut.id) {
          <a [routerLink]="'/' + shortcut.type + '/' + shortcut.id" class="shortcut-link">
            <div class="shortcut-img" [style.background-image]="shortcut.image ? 'url(' + shortcut.image + ')' : ''">
              <span class="fallback">{{ shortcut.name.charAt(0) }}</span>
            </div>
            <span>{{ shortcut.name }}</span>
          </a>
        }
      </div>
    }

    <!-- Footer Links -->
    <div class="sidebar-footer">
      <a href="#">Privacy</a> · <a href="#">Terms</a> · <a href="#">About</a>
      <p>© 2024 CommunityCar</p>
    </div>
  </aside>

  <!-- Main Content Area -->
  <main class="main-content">
    <router-outlet></router-outlet>
  </main>

  <!-- Right Sidebar -->
  @if (showRightSidebar) {
    <aside class="right-sidebar">
      <!-- Trending Section -->
      <div class="sidebar-card">
        <h4>Trending Now</h4>
        @switch (rightSidebarContent) {
          @case ('videos') {
            <div class="trending-list">
              <a href="#" class="trending-item">
                <span class="rank">#1</span>
                <span class="title">Classic Car Restoration</span>
                <span class="count">125K views</span>
              </a>
              <a href="#" class="trending-item">
                <span class="rank">#2</span>
                <span class="title">Engine Rebuild Tutorial</span>
                <span class="count">98K views</span>
              </a>
              <a href="#" class="trending-item">
                <span class="rank">#3</span>
                <span class="title">DIY Car Detailing</span>
                <span class="count">76K views</span>
              </a>
            </div>
          }
          @case ('marketplace') {
            <div class="trending-list">
              <a href="#" class="trending-item">
                <span class="rank">#1</span>
                <span class="title">Vintage Parts</span>
                <span class="count">2.5K listings</span>
              </a>
              <a href="#" class="trending-item">
                <span class="rank">#2</span>
                <span class="title">Performance Upgrades</span>
                <span class="count">1.8K listings</span>
              </a>
              <a href="#" class="trending-item">
                <span class="rank">#3</span>
                <span class="title">Interior Accessories</span>
                <span class="count">1.2K listings</span>
              </a>
            </div>
          }
          @case ('podcasts') {
            <div class="trending-list">
              <a href="#" class="trending-item">
                <span class="rank">#1</span>
                <span class="title">Car Talk Weekly</span>
                <span class="count">50K plays</span>
              </a>
              <a href="#" class="trending-item">
                <span class="rank">#2</span>
                <span class="title">Garage Stories</span>
                <span class="count">35K plays</span>
              </a>
              <a href="#" class="trending-item">
                <span class="rank">#3</span>
                <span class="title">EV Revolution</span>
                <span class="count">28K plays</span>
              </a>
            </div>
          }
          @default {
            <div class="trending-list">
              <a href="#" class="trending-item">
                <span class="rank">#1</span>
                <span class="title">Popular Topic</span>
                <span class="count">Trending</span>
              </a>
            </div>
          }
        }
      </div>

      <hr class="divider">

      <!-- Suggested Section -->
      <div class="sidebar-card">
        <h4>Suggested for You</h4>
        <div class="suggested-list">
          @switch (rightSidebarContent) {
            @case ('videos') {
              <a href="#" class="suggested-item">
                <div class="suggested-thumb" style="background: linear-gradient(135deg, #667eea, #764ba2);">
                  <svg viewBox="0 0 24 24" fill="currentColor"><path d="M8 5v14l11-7z"/></svg>
                </div>
                <div class="suggested-info">
                  <p>Top Channels to Follow</p>
                  <span>Discover new creators</span>
                </div>
              </a>
            }
            @case ('marketplace') {
              <a href="#" class="suggested-item">
                <div class="suggested-thumb" style="background: linear-gradient(135deg, #f093fb, #f5576c);">
                  <svg viewBox="0 0 24 24" fill="currentColor"><path d="M21.41 11.58l-9-9C12.05 2.22 11.55 2 11 2H4c-1.1 0-2 .9-2 2v7c0 .55.22 1.05.59 1.42l9 9c.36.36.86.58 1.41.58.55 0 1.05-.22 1.41-.59l7-7c.37-.36.59-.86.59-1.41 0-.55-.23-1.06-.59-1.42zM5.5 7C4.67 7 4 6.33 4 5.5S4.67 4 5.5 4 7 4.67 7 5.5 6.33 7 5.5 7z"/></svg>
                </div>
                <div class="suggested-info">
                  <p>Today's Deals</p>
                  <span>Up to 50% off</span>
                </div>
              </a>
            }
            @case ('podcasts') {
              <a href="#" class="suggested-item">
                <div class="suggested-thumb" style="background: linear-gradient(135deg, #4facfe, #00f2fe);">
                  <svg viewBox="0 0 24 24" fill="currentColor"><path d="M12 1c-4.97 0-9 4.03-9 9v7c0 1.66 1.34 3 3 3h3v-8H5v-2c0-3.87 3.13-7 7-7s7 3.13 7 7v2h-4v8h3c1.66 0 3-1.34 3-3v-7c0-4.97-4.03-9-9-9z"/></svg>
                </div>
                <div class="suggested-info">
                  <p>New Episodes</p>
                  <span>Fresh content daily</span>
                </div>
              </a>
            }
            @default {
              <a href="#" class="suggested-item">
                <div class="suggested-thumb" style="background: linear-gradient(135deg, #667eea, #764ba2);">
                  <svg viewBox="0 0 24 24" fill="currentColor"><path d="M12 2l-5.5 9h11z"/></svg>
                </div>
                <div class="suggested-info">
                  <p>Explore More</p>
                  <span>Discover content</span>
                </div>
              </a>
            }
          }
        </div>
      </div>

      <hr class="divider">

      <!-- Online Contacts -->
      <div class="sidebar-card contacts-section">
        <div class="contacts-header">
          <h4>Contacts</h4>
          <div class="contacts-actions">
            <button class="icon-btn-sm" title="Search">
              <svg viewBox="0 0 24 24" fill="currentColor">
                <path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/>
              </svg>
            </button>
          </div>
        </div>
        <div class="contacts-list">
          @for (contact of onlineContacts(); track contact.id) {
            <a href="#" class="contact-item">
              <div class="contact-avatar" [class.online]="contact.online">
                <span>{{ contact.initials }}</span>
              </div>
              <span class="contact-name">{{ contact.name }}</span>
            </a>
          }
        </div>
      </div>
    </aside>
  }
</div>
