<header class="main-header">
  <div class="header-container">
    <!-- Logo -->
    <a routerLink="/" class="logo">
      <svg viewBox="0 0 24 24" fill="currentColor">
        <path d="M18.92 6.01C18.72 5.42 18.16 5 17.5 5h-11c-.66 0-1.21.42-1.42 1.01L3 12v8c0 .55.45 1 1 1h1c.55 0 1-.45 1-1v-1h12v1c0 .55.45 1 1 1h1c.55 0 1-.45 1-1v-8l-2.08-5.99zM6.5 16c-.83 0-1.5-.67-1.5-1.5S5.67 13 6.5 13s1.5.67 1.5 1.5S7.33 16 6.5 16zm11 0c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5zM5 11l1.5-4.5h11L19 11H5z"/>
      </svg>
      <span>CommunityCar</span>
    </a>

    <!-- Main Navigation -->
    <nav class="main-nav">
      <a routerLink="/community" routerLinkActive="active" class="nav-item" [title]="'navigation.community' | translate">
        <svg viewBox="0 0 24 24" fill="currentColor">
          <path d="M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z"/>
        </svg>
        <span>{{ 'navigation.community' | translate }}</span>
      </a>
      <a routerLink="/videos" routerLinkActive="active" class="nav-item" [title]="'navigation.videos' | translate">
        <svg viewBox="0 0 24 24" fill="currentColor">
          <path d="M17 10.5V7c0-.55-.45-1-1-1H4c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h12c.55 0 1-.45 1-1v-3.5l4 4v-11l-4 4z"/>
        </svg>
        <span>{{ 'navigation.videos' | translate }}</span>
      </a>
      <a routerLink="/marketplace" routerLinkActive="active" class="nav-item" [title]="'navigation.marketplace' | translate">
        <svg viewBox="0 0 24 24" fill="currentColor">
          <path d="M7 18c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zM1 2v2h2l3.6 7.59-1.35 2.45c-.16.28-.25.61-.25.96 0 1.1.9 2 2 2h12v-2H7.42c-.14 0-.25-.11-.25-.25l.03-.12L8.1 13h7.45c.75 0 1.41-.41 1.75-1.03L21.7 4H5.21l-.94-2H1zm16 16c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"/>
        </svg>
        <span>{{ 'navigation.marketplace' | translate }}</span>
      </a>
      <a routerLink="/podcasts" routerLinkActive="active" class="nav-item" [title]="'navigation.podcasts' | translate">
        <svg viewBox="0 0 24 24" fill="currentColor">
          <path d="M12 1c-4.97 0-9 4.03-9 9v7c0 1.66 1.34 3 3 3h3v-8H5v-2c0-3.87 3.13-7 7-7s7 3.13 7 7v2h-4v8h3c1.66 0 3-1.34 3-3v-7c0-4.97-4.03-9-9-9z"/>
        </svg>
        <span>{{ 'navigation.podcasts' | translate }}</span>
      </a>
      <a routerLink="/services" routerLinkActive="active" class="nav-item" [title]="'navigation.services' | translate">
        <svg viewBox="0 0 24 24" fill="currentColor">
          <path d="M22.7 19l-9.1-9.1c.9-2.3.4-5-1.5-6.9-2-2-5-2.4-7.4-1.3L9 6 6 9 1.6 4.7C.4 7.1.9 10.1 2.9 12.1c1.9 1.9 4.6 2.4 6.9 1.5l9.1 9.1c.4.4 1 .4 1.4 0l2.3-2.3c.5-.4.5-1.1.1-1.4z"/>
        </svg>
        <span>{{ 'navigation.services' | translate }}</span>
      </a>
    </nav>

    <!-- Search -->
    <div class="search-box">
      <svg viewBox="0 0 24 24" fill="currentColor">
        <path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/>
      </svg>
      <input type="text" [placeholder]="'common.search' | translate">
    </div>

    <!-- Right Section -->
    <div class="header-right">
      <!-- Language Switcher -->
      <div class="dropdown-wrap">
        <button class="lang-btn" (click)="toggleLanguageMenu()" [title]="localization.currentLang() === 'ar' ? 'English' : 'العربية'">
          <svg viewBox="0 0 24 24" fill="currentColor" class="lang-icon">
            <path d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"/>
          </svg>
          <span class="lang-code">{{ localization.currentLang() === 'ar' ? 'ع' : 'EN' }}</span>
        </button>
        @if (showLanguageMenu()) {
          <div class="dropdown lang-menu">
            @for (lang of localization.languages; track lang.code) {
              <button 
                class="lang-option" 
                [class.active]="localization.currentLang() === lang.code"
                (click)="setLanguage(lang.code)">
                <span class="lang-native">{{ lang.nativeName }}</span>
                <span class="lang-name">{{ lang.name }}</span>
                @if (localization.currentLang() === lang.code) {
                  <svg class="check-icon" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/>
                  </svg>
                }
              </button>
            }
          </div>
        }
      </div>

      @if (authService.currentUser()) {
        <!-- Notifications -->
        <div class="dropdown-wrap">
          <button class="icon-btn" (click)="toggleNotifications()">
            <svg viewBox="0 0 24 24" fill="currentColor">
              <path d="M12 22c1.1 0 2-.9 2-2h-4c0 1.1.9 2 2 2zm6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2z"/>
            </svg>
            @if (unreadCount > 0) {
              <span class="badge">{{ unreadCount }}</span>
            }
          </button>
          @if (showNotifications()) {
            <div class="dropdown">
              <div class="dropdown-header">
                <h3>{{ 'notifications.title' | translate }}</h3>
              </div>
              <div class="dropdown-body">
                @for (n of notifications(); track n.id) {
                  <div class="notification-item" [class.unread]="!n.read">
                    <p>{{ n.title }}</p>
                    <span>{{ n.time }}</span>
                  </div>
                }
              </div>
            </div>
          }
        </div>

        <!-- User Menu -->
        <div class="dropdown-wrap">
          <button class="user-btn" (click)="toggleUserMenu()">
            <div class="avatar">{{ getUserInitials() }}</div>
          </button>
          @if (showUserMenu()) {
            <div class="dropdown user-menu">
              <a (click)="navigateTo('/profile')">{{ 'common.profile' | translate }}</a>
              <a (click)="navigateTo('/dashboard')">{{ 'navigation.dashboard' | translate }}</a>
              <a (click)="navigateTo('/settings')">{{ 'common.settings' | translate }}</a>
              <hr>
              <a (click)="logout()" class="logout">{{ 'common.logout' | translate }}</a>
            </div>
          }
        </div>
      } @else {
        <a routerLink="/login" class="btn-outline">{{ 'common.login' | translate }}</a>
        <a routerLink="/register" class="btn-primary">{{ 'auth.register' | translate }}</a>
      }
    </div>
  </div>
</header>
