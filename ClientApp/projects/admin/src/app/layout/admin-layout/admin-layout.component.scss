@import '../../shared/styles/_index';

// Admin Layout - Clean Grid Implementation
// =============================================================================

.admin-layout {
  display: flex;
  flex-direction: column;
  min-height: 100vh;
  background: $bg-secondary;

  // Header - always at top
  app-admin-header {
    position: sticky;
    top: 0;
    z-index: $z-index-sticky;
  }

  // Layout wrapper for sidebar + content
  .layout-wrapper {
    display: flex;
    flex: 1;
    position: relative;
  }

  // Sidebar positioning
  app-admin-sidebar {
    position: fixed;
    top: $nav-height;
    left: 0;
    bottom: 0;
    z-index: $z-index-sidebar + 20; // Ensure above mobile overlay (1030)
  }

  // Main content area
  .main-content {
    flex: 1;
    margin-left: 16rem; // Space for open sidebar
    transition: margin-left $transition-smooth;

    // Respect user's motion preferences
    @include reduced-motion {
      transition: none;
    }

    @include respond-below('lg') {
      margin-left: 14rem;
    }

    @include respond-below('md') {
      margin-left: 0; // No margin on mobile, sidebar overlays
    }

    // When sidebar is closed
    &.sidebar-closed {
      margin-left: 4rem; // Space for icon-only sidebar

      @include respond-below('md') {
        margin-left: 0;
      }
    }

    .content-area {
      min-height: calc(100vh - $nav-height);
    }
  }
}

// Mobile Overlay
// -----------------------------------------------------------------------------
.mobile-overlay {
  position: fixed;
  inset: 0;
  top: $nav-height;
  background: rgba(0, 0, 0, 0.5);
  z-index: 1030; // Below sidebar (1050) but above content
  backdrop-filter: blur(4px);
  cursor: pointer;
  animation: fadeIn 0.2s ease-out;

  @include reduced-motion {
    animation: none;
  }

  @include respond-to('md') {
    display: none;
  }
}

// Animations
// -----------------------------------------------------------------------------
@keyframes fadeIn {
  from {
    opacity: 0;
  }

  to {
    opacity: 1;
  }
}

// Dark Mode
// -----------------------------------------------------------------------------
@include dark-mode {
  .admin-layout {
    background: $dark-bg-primary;
  }

  .mobile-overlay {
    background: rgba(0, 0, 0, 0.7);
  }
}