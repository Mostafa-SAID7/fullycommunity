<div class="admin-sidebar" [class.sidebar-open]="isOpen()" [class.sidebar-closed]="!isOpen()">
  <nav class="sidebar-nav" aria-label="Main navigation">


    <!-- Dashboard at top - Fixed -->
    <div class="dashboard-section">
      <a routerLink="dashboard" routerLinkActive="active" [title]="!isOpen() ? 'Dashboard' : ''" class="dashboard-link"
        [class.centered]="!isOpen()" [class.active]="isLinkActive('dashboard')">
        <i class="fas fa-tachometer-alt dashboard-icon"></i>
        <span *ngIf="isOpen()" class="dashboard-text">Dashboard</span>
      </a>
    </div>

    <!-- Scrollable middle content -->
    <div class="scrollable-content">
      <!-- Management Section -->
      <div *ngIf="isOpen()">
        <button (click)="toggleSection('management')" class="section-header">
          <span>Management</span>
          <i class="fas fa-chevron-down section-icon" [class.collapsed]="!sections.management()"></i>
        </button>
        <ul class="nav-list section-content" [class.hidden]="!sections.management()">
          <li class="nav-item">
            <a routerLink="users" routerLinkActive="active" class="nav-link" [class.active]="isLinkActive('users')">
              <i class="fas fa-users nav-icon"></i>
              <span class="nav-text">User Management</span>
            </a>
          </li>
          <li class="nav-item">
            <a routerLink="content" routerLinkActive="active" class="nav-link" [class.active]="isLinkActive('content')">
              <i class="fas fa-file-alt nav-icon"></i>
              <span class="nav-text">Content Management</span>
            </a>
          </li>
          <li class="nav-item">
            <a routerLink="moderation" routerLinkActive="active" class="nav-link"
              [class.active]="isLinkActive('moderation')">
              <i class="fas fa-gavel nav-icon"></i>
              <span class="nav-text">Moderation</span>
            </a>
          </li>
        </ul>
      </div>

      <!-- Icon-only links when closed -->
      <div *ngIf="!isOpen()" class="icon-only-section">
        <a routerLink="users" routerLinkActive="active" title="User Management" class="icon-link"
          [class.active]="isLinkActive('users')">
          <i class="fas fa-users icon"></i>
        </a>
        <a routerLink="content" routerLinkActive="active" title="Content Management" class="icon-link"
          [class.active]="isLinkActive('content')">
          <i class="fas fa-file-alt icon"></i>
        </a>
        <a routerLink="moderation" routerLinkActive="active" title="Moderation" class="icon-link"
          [class.active]="isLinkActive('moderation')">
          <i class="fas fa-gavel icon"></i>
        </a>
      </div>

      <!-- Analytics Section -->
      <div *ngIf="isOpen()">
        <button (click)="toggleSection('analytics')" class="section-header">
          <span>Analytics</span>
          <i class="fas fa-chevron-down section-icon" [class.collapsed]="!sections.analytics()"></i>
        </button>
        <ul class="nav-list section-content" [class.hidden]="!sections.analytics()">
          <li class="nav-item">
            <a routerLink="reports" routerLinkActive="active" class="nav-link" [class.active]="isLinkActive('reports')">
              <i class="fas fa-chart-bar nav-icon"></i>
              <span class="nav-text">Reports & Analytics</span>
            </a>
          </li>
        </ul>
      </div>

      <!-- Icon-only Reports when closed -->
      <div *ngIf="!isOpen()" class="icon-only-section">
        <a routerLink="reports" routerLinkActive="active" title="Reports & Analytics" class="icon-link"
          [class.active]="isLinkActive('reports')">
          <i class="fas fa-chart-bar icon"></i>
        </a>
      </div>

      <!-- System Section -->
      <div *ngIf="isOpen()">
        <button (click)="toggleSection('system')" class="section-header">
          <span>System</span>
          <i class="fas fa-chevron-down section-icon" [class.collapsed]="!sections.system()"></i>
        </button>
        <ul class="nav-list section-content" [class.hidden]="!sections.system()">
          <li class="nav-item">
            <a routerLink="settings" routerLinkActive="active" class="nav-link"
              [class.active]="isLinkActive('settings')">
              <i class="fas fa-cogs nav-icon"></i>
              <span class="nav-text">System Settings</span>
            </a>
          </li>
          <li class="nav-item">
            <a routerLink="system-health" routerLinkActive="active" class="nav-link"
              [class.active]="isLinkActive('system-health')">
              <i class="fas fa-heartbeat nav-icon"></i>
              <span class="nav-text">System Health</span>
            </a>
          </li>
          <li class="nav-item">
            <a routerLink="maintenance" routerLinkActive="active" class="nav-link"
              [class.active]="isLinkActive('maintenance')">
              <i class="fas fa-tools nav-icon"></i>
              <span class="nav-text">Maintenance</span>
            </a>
          </li>
          <li class="nav-item">
            <a routerLink="security" routerLinkActive="active" class="nav-link"
              [class.active]="isLinkActive('security')">
              <i class="fas fa-shield-alt nav-icon"></i>
              <span class="nav-text">Security Center</span>
            </a>
          </li>
          <li class="nav-item">
            <a routerLink="api" routerLinkActive="active" class="nav-link" [class.active]="isLinkActive('api')">
              <i class="fas fa-code nav-icon"></i>
              <span class="nav-text">API Management</span>
            </a>
          </li>
          <li class="nav-item">
            <a routerLink="notifications" routerLinkActive="active" class="nav-link"
              [class.active]="isLinkActive('notifications')">
              <i class="fas fa-bell nav-icon"></i>
              <span class="nav-text">Notifications</span>
            </a>
          </li>
          <li class="nav-item">
            <a routerLink="activity-log" routerLinkActive="active" class="nav-link"
              [class.active]="isLinkActive('activity-log')">
              <i class="fas fa-history nav-icon"></i>
              <span class="nav-text">Activity Log</span>
            </a>
          </li>
          <li class="nav-item">
            <a routerLink="localization" routerLinkActive="active" class="nav-link"
              [class.active]="isLinkActive('localization')">
              <i class="fas fa-globe nav-icon"></i>
              <span class="nav-text">Localization</span>
            </a>
          </li>
        </ul>
      </div>

      <!-- Icon-only Settings when closed -->
      <div *ngIf="!isOpen()" class="icon-only-section">
        <a routerLink="settings" routerLinkActive="active" title="System Settings" class="icon-link"
          [class.active]="isLinkActive('settings')">
          <i class="fas fa-cogs icon"></i>
        </a>
      </div>

      <!-- Help Section -->
      <div *ngIf="isOpen()" class="help-section">
        <div class="help-divider">
          <div class="divider-line"></div>
        </div>
        <a routerLink="help" routerLinkActive="active" class="help-link" [class.active]="isLinkActive('help')">
          <i class="fas fa-question-circle help-icon"></i>
          <span class="help-text">Help & Support</span>
        </a>
      </div>

      <!-- Icon-only Help when closed -->
      <div *ngIf="!isOpen()" class="help-section">
        <a routerLink="help" routerLinkActive="active" title="Help & Support" class="help-link centered"
          [class.active]="isLinkActive('help')">
          <i class="fas fa-question-circle help-icon large"></i>
        </a>
      </div>
    </div>

    <!-- My Profile at bottom - Fixed -->
    <div class="profile-section">
      <a routerLink="profile" routerLinkActive="active" [title]="!isOpen() ? 'My Profile' : ''" class="profile-link"
        [class.centered]="!isOpen()" [class.active]="isLinkActive('profile')">
        <i class="fas fa-user-circle profile-icon"></i>
        <span *ngIf="isOpen()" class="profile-text">My Profile</span>
      </a>
    </div>
  </nav>
</div>