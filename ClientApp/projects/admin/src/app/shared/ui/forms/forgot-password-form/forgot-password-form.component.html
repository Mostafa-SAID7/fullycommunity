<div class="forgot-password-container">
  <!-- Background Elements -->
  <div class="background-elements">
    <div class="bg-element element-1"></div>
    <div class="bg-element element-2"></div>
  </div>

  <!-- Forgot Password Card -->
  <div class="forgot-password-card-wrapper">
    <div class="forgot-password-card">
      <!-- Header -->
      <div class="forgot-password-header">
        <div class="icon-container">
          <svg fill="none" stroke="currentColor" viewBox="0 0 24 24" class="forgot-icon">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
                  d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"/>
          </svg>
        </div>
        <h1 class="forgot-password-title">Forgot Password?</h1>
        <p class="forgot-password-subtitle" *ngIf="!emailSent()">
          No worries! Enter your email address and we'll send you instructions to reset your password.
        </p>
        <p class="forgot-password-subtitle" *ngIf="emailSent()">
          Check your email for password reset instructions.
        </p>
      </div>

      <!-- Success State -->
      <div *ngIf="emailSent()" class="success-state">
        <div class="success-icon">
          <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
                  d="M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"/>
          </svg>
        </div>
        
        <div *ngIf="successMessage()" class="success-message">
          {{ successMessage() }}
        </div>

        <div class="success-actions">
          <button type="button" class="btn btn-secondary" (click)="onResendEmail()">
            Resend Email
          </button>
          <button type="button" class="btn btn-primary" (click)="onBackToLogin()">
            Back to Login
          </button>
        </div>
      </div>

      <!-- Form State -->
      <form *ngIf="!emailSent()" [formGroup]="forgotPasswordForm" (ngSubmit)="onSubmit()" class="forgot-password-form">
        <!-- Error Message -->
        <div *ngIf="errorMessage()" class="error-message">
          {{ errorMessage() }}
        </div>

        <!-- Email Field -->
        <div class="form-field">
          <label for="email" class="field-label">Email Address</label>
          <div class="input-wrapper">
            <div class="input-icon">
              <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
                      d="M16 12a4 4 0 10-8 0 4 4 0 008 0zm0 0v1.5a2.5 2.5 0 005 0V12a9 9 0 10-9 9m4.5-1.206a8.959 8.959 0 01-4.5 1.207"/>
              </svg>
            </div>
            <input
              id="email"
              type="email"
              formControlName="email"
              placeholder="Enter your email address"
              class="form-input"
              [class.error]="getFieldError('email')"
              autocomplete="email"
            />
          </div>
          <div *ngIf="getFieldError('email')" class="field-error">
            {{ getFieldError('email') }}
          </div>
        </div>

        <!-- Submit Button -->
        <button type="submit" class="submit-button" [disabled]="loading()">
          <div *ngIf="loading()" class="loading-spinner"></div>
          <span>{{ loading() ? 'Sending...' : 'Send Reset Instructions' }}</span>
        </button>

        <!-- Back to Login -->
        <button type="button" class="back-to-login" (click)="onBackToLogin()">
          <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
          </svg>
          Back to Login
        </button>
      </form>

      <!-- Footer -->
      <div class="forgot-password-footer">
        <div class="security-notice">
          <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
                  d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"/>
          </svg>
          <span>We'll never share your email with anyone else</span>
        </div>
        
        <div class="copyright">
          Â© 2024 Community Car. All rights reserved.
        </div>
      </div>
    </div>
  </div>
</div>