<div class="verification-form">
  <div class="form-header">
    <div class="icon-container">
      <svg fill="none" stroke="currentColor" viewBox="0 0 24 24" class="verification-icon">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" [attr.d]="getVerificationIcon()"/>
      </svg>
    </div>
    <h2 class="form-title">{{ title }}</h2>
    <p class="form-subtitle">{{ subtitle }}</p>
  </div>

  <!-- Success Message -->
  <div *ngIf="successMessage()" class="success-message">
    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/>
    </svg>
    {{ successMessage() }}
  </div>

  <!-- Error Message -->
  <div *ngIf="errorMessage()" class="error-message">
    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
            d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
    </svg>
    {{ errorMessage() }}
  </div>

  <form [formGroup]="verificationForm" (ngSubmit)="onSubmit()">
    <!-- Code Input -->
    <div class="code-input-container">
      <label class="code-label">Verification Code</label>
      <div class="digit-inputs">
        <input
          *ngFor="let digit of codeDigits(); let i = index"
          type="text"
          class="digit-input"
          [value]="digit"
          (input)="onDigitInput($event, i)"
          (keydown)="onDigitKeydown($event, i)"
          maxlength="1"
          autocomplete="off"
          [disabled]="loading()"
        />
      </div>
      <p class="code-help">Enter the 6-digit code sent to your {{ verificationType }}</p>
    </div>

    <!-- Loading State -->
    <div *ngIf="loading()" class="loading-state">
      <div class="loading-spinner"></div>
      <span>Verifying code...</span>
    </div>

    <!-- Resend Section -->
    <div class="resend-section">
      <p class="resend-text">Didn't receive the code?</p>
      <button 
        type="button" 
        class="resend-button" 
        (click)="onResendCode()"
        [disabled]="countdown() > 0 || resendLoading()"
      >
        <div *ngIf="resendLoading()" class="loading-spinner small"></div>
        <span *ngIf="countdown() > 0">Resend in {{ countdown() }}s</span>
        <span *ngIf="countdown() === 0 && !resendLoading()">Resend Code</span>
        <span *ngIf="resendLoading()">Sending...</span>
      </button>
    </div>

    <!-- Form Actions -->
    <div class="form-actions">
      <button type="button" class="btn btn-secondary" (click)="onCancel()" [disabled]="loading()">
        Cancel
      </button>
      <button type="submit" class="btn btn-primary" [disabled]="loading() || verificationForm.invalid">
        <span>Verify</span>
      </button>
    </div>
  </form>

  <!-- Security Notice -->
  <div class="security-notice">
    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
            d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"/>
    </svg>
    <span>This verification helps keep your account secure</span>
  </div>
</div>